var WireUp,WireConnector,SignalConnector;(function(n){function f(n){var u=[],f,t,i,r,e;if(!n)return u;for(f=n.split(","),t=0;t<f.length;++t)(i=f[t],i&&0!==i.length)&&(r=i.split("/"),e={ci:r[0],cp:r[1],ct:r[2]},u.push(e));return u}function e(n){var t=n.split(";");return{type:t[0],name:t[1],cons:f(t[2])}}function o(n){for(var t,r,u={eps:{},w:!1,id:""},f=n.split("|"),i=0;i<f.length;++i)t=f[i],t&&t.length>0&&(r=e(t),u.eps[r.name]=r);return u}function s(n,t){for(var u=null,o=_d.querySelectorAll,r,f,e,u=o?o.call(_d,"["+n+"]"):_d.getElementsByTagName("*"),i=0;i<u.length;i++)r=u[i],f=r.getAttribute,f&&(e=f.call(r,n),e&&t(r,e))}function h(n,i,r,u){if(t.cis[i]){u.nodeHandler&&u.nodeHandler(i,n,r,t.cis[i]);return}t.cis[i]={};u.logicHandler(i,t.cis[i]);u.nodeHandler&&u.nodeHandler(i,n,r,t.cis[i])}function c(){t={nc:0,nodes:{},chs:{},ihs:{},cis:{}};n.g=t}function i(){var r="data-wire",n,i;s(r,function(n,i){n.id||(n.id="wire"+t.nc++);var u=o(i);u.id=n.id;t.nodes[n.id]=u;n.removeAttribute(r)});for(n in t.nodes)t.nodes.hasOwnProperty(n)&&(i=t.nodes[n],i.w||l(i))}function l(n){var u,t,e,o,i,f;if(n&&n.eps&&(u=_ge(n.id),u)){t=n.eps;e=!0;for(i in t)t.hasOwnProperty(i)&&(f=t[i],o=r(u,f,!0),o||(e=!1));if(e){for(i in t)t.hasOwnProperty(i)&&(f=t[i],r(u,f,!1));n.w=!0}}}function r(n,i,r){var e,o,u,f;if(!i)return!1;if(i.type==="I"){if(e=t.ihs[i.name],r)return e&&!0;e&&e(n)}if(i.type==="F"||i.type==="B")for(o=0;o<i.cons.length;++o)if(u=i.cons[o],u.cp&&u.ct){if(f=t.chs[u.ct],f&&h(n,u.ci,u.cp,f),r)return f&&!0;if(!f)throw""+u.ct+" not registered";}return!0}function a(n,r){t.ihs[n]=r;i()}function u(n,i,r){var s=n&&t.nodes[n.id],e,o,u,f,h;if(s&&(e=s.eps,e)&&(o=e[i],o)&&(u=o.cons,u))for(f=0;f<u.length;++f)h=u[f],r(h)}function v(n,t,i){n&&u(n,t,function(t){sj_evt.fire(t.ci+"_"+t.cp,n,null,i)})}function y(n,t,i){n&&u(n,t,function(t){sj_evt.bind(t.ci+"_"+t.cp,function(t){var u=t[1],r=t[2],f=t[3];r&&r.id!==n.id||i(n,u,r,f)})})}function p(n,r,u){u===void 0&&(u=null);t.chs[n]={logicHandler:r,nodeHandler:u};i()}var t=n.g||{nc:0,nodes:{},chs:{},ihs:{},cis:{}};n.g=t;n.init=a;n.setValue=v;n.onUpdate=y;n.register=p;sj_evt.bind("unload",c,!0);sj_evt.bind("onP1",i,!0)})(WireUp||(WireUp={})),function(){WireUp.register("wire",function(n){sj_evt.bind(n+"_i",function(t){var i=t[1],u=t[2],r=t[3];sj_evt.fire(n+"_o",i,null,r)})})}(WireConnector||(WireConnector={})),function(){WireUp.register("signal",function(n){sj_evt.bind(n+"_i",function(t){var i=t[1],r=t[2],u=t[3];sj_evt.fire(n+"_o",i,null,!0)})})}(SignalConnector||(SignalConnector={}))